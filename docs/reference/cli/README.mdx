---
sidebar_position: 2
title: CLI
---

The Otterize command line interface (CLI) offers the following capabilities:
- [Interact with](#network-mapper) the [Otterize network mapper](/quick-tutorials/k8s-network-mapper) running in a Kubernetes cluster.
- [Transform](#otterize-intents-convert--f-path) [intents files](/intents-and-intents-files/#intents-file-formats) from plain YAML format to Kubernetes custom resource YAML format.
- Interact with the Otterize Cloud, through its REST API.

This CLI is open-source software. To see its source or build it yourself,
see [https://github.com/otterize/otterize-cli](https://github.com/otterize/otterize-cli).

The CLI is available as an installable binary as documented in this [guide](/getting-started/oss-installation#install-the-otterize-cli).

The following are the commands offered by the Otterize CLI.

## Command structure

Most CLI commands are of the form `otterize OBJECT ACTION`. Because there are multiple objects
which each have multiple operations, this order makes the auto-completion and documentation built into the CLI
easy to access on the fly.

- `otterize -h` or `otterize --help` offers help on the various objects
- `otterize OBJECT -h` or `otterize OBJECT --help` offers help on the specified object
- `otterize OBJECT OPERATION -h` or `otterize OBJECT OPERATION --help` offers help on the specified operation

`otterize completion` offers instruction for generating command completions in various shells.

## Network mapper

All `otterize mapper` commands share a set of optional flags which will not be repeated in the documentation
for each command.

#### Common options

| Name | Default | Description |
| --- | --- | --- |
| `--mapper-namespace` | `otterize-system` | Specifies the namespace where the mapper service was installed. |
| `--mapper-service-name` | `otterize-network-mapper` | Specifies the name of the mapper service as it was installed. |
| `--mapper-service-name` | `otterize-service-port` | Specifies the port on which the mapper service is listening. |


### `otterize mapper reset`

Resets the network mapper by deleting all map information built up so far in memory.

### `otterize mapper list [-n <namespace1>,<namespace2>,...]`

Return the network map built by the network mapper since it started, or since it was reset,
as a list of clients and the servers they call.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| `-n` or `--namespaces` |  | Export only clients in these namespaces (comma-separated) |

#### Returns

Here's a partial output from `otterize mapper list -n otterize-ecom-demo`:

```shell
cartservice in namespace otterize-ecom-demo calls:
  - redis-cart
checkoutservice in namespace otterize-ecom-demo calls:
  - cartservice
  - currencyservice
  - emailservice
  - paymentservice
  - productcatalogservice
  - shippingservice
frontend in namespace otterize-ecom-demo calls:
  - adservice
  - cartservice
  - checkoutservice
  - currencyservice
  - productcatalogservice
  - recommendationservice
  - shippingservice
loadgenerator in namespace otterize-ecom-demo calls:
  - frontend
recommendationservice in namespace otterize-ecom-demo calls:
  - productcatalogservice
```

### `otterize mapper export [--format] [-n <namespace1>,<namespace2>,...] [-o <path>] [--output-type <output-type>]`

Return the network map built by the network mapper since it started, or since it was reset,
as [client intents file(s)](/intents-and-intents-files/#intents-file-formats) in various formats.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| `--format` | `yaml` | Specifies the format for the export: 'yaml' or 'json'. |
| `-n` or `--namespaces` |  | Export only clients in these namespaces (comma-separated) |
| `-o` or `--output` | `STDOUT` | Filename or directory for redirecting the output |
| `--output-type` | `single-file` | Whether the output should be written as a single file (`single-file`) or as multiple files in a directory (`dir`). Requires the `-o` or `--output` to point to a directory. |

#### Returns

Here's a partial output from `otterize network-mapper export -n otterize-ecom-demo`:

```shell
apiVersion: k8s.otterize.com/v1alpha2
kind: ClientIntents
metadata:
  name: cartservice
  namespace: otterize-ecom-demo
spec:
  service:
    name: cartservice
  calls:
    - name: redis-cart
      type: http
---
apiVersion: k8s.otterize.com/v1alpha2
kind: ClientIntents
metadata:
  name: checkoutservice
  namespace: otterize-ecom-demo
spec:
  service:
    name: checkoutservice
  calls:
    - name: cartservice
      type: http
    - name: currencyservice
      type: http
```

### `otterize network-mapper intents-convert [-f PATH]`

Convert client intents files in plain YAML format to Kubernetes ClientIntents resource format.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| `-f` or `--filename` | `'.'` | The client intents filename, or a directory containing client intents files. |

#### Returns

Here's the result of converting a directory containing two client intents file in plain YAML format.
The result is YAML describing two Kubernetes resources separated with the YAML `---` separator.

```shell
apiVersion: k8s.otterize.com/v1alpha2
kind: ClientIntents
metadata:
  name: cartservice
  namespace: otterize-ecom-demo
spec:
  service:
    name: cartservice
  calls:
    - name: redis-cart
      type: http
---
apiVersion: k8s.otterize.com/v1alpha2
kind: ClientIntents
metadata:
  name: checkoutservice
  namespace: otterize-ecom-demo
spec:
  service:
    name: checkoutservice
  calls:
    - name: cartservice
      type: http
    - name: currencyservice
      type: http
```

:::danger
Document global options
:::

## Login

### `otterize login [--switch-account] [--switch-org]`

Login to Otterize Cloud using a web browser.

If `--switch-account` is specified, re-authenticating is forced in the browser, so a new user can be chosen.

If `--switch-org` is specified, and the current user belongs to multiple org, the new org can be chosen interactively.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| `--switch-account` |  | Login to a different user account than the one currently set. |
| `--switch-org` |  | Switch to a different organization than the one currently set. |

#### Returns

Outputs login process progress messages, including registering a user if needed, creating an org if needed,
and setting the user and org to use by default in other commands.

```shell
Please login to Otterize using your browser: https://...
Login completed successfully! logged in as: my-username@example.com

Querying user info from Otterize server
Logged in as Otterize user usr_1234567 (my-username@example.com)
Only 1 organization found - auto-selecting this organization for use.
Selected organization org_1234567
To change your organization selection, log-in again with --switch-org.

```

## API version

### `otterize api-version`

Queries the Otterize Cloud for the current API version (e.g. `v1`) and revision (hash of the current API definition).

#### Returns

Returns the current version and revision of the Otterize REST API, as well as the version and revision against which this CLI is built.

Note that the Otterize CLI is mostly a thin but useful utility for invoking the Otterize Cloud REST API.
API versions that differ by version number may break backwards compatibility, while those that only differ by revision are backwards compatible: revisions add functionality or documentation but preserve all previous functionality.

If only the Cloud API has changed since the CLI was built (revisions don't match), the CLI might be missing some Cloud capabilities.

If also the Cloud API version is later than the CLI version, some CLI commands might fail.

Beta version of the Cloud API (e.g. `v1beta`) are volatile: they can change and break backwards compatibility until they are out of beta.

```shell
Current Cloud API:
    version: v1
    revision: 465ba4174008682f54f99e37d0b7791148aade14
This CLI was built against:
    version: v1
    revision: 91efb6f8acb98985fc2b993baa8d279049c8b302

Caution: this CLI was built with a different version/revision of the Otterize Cloud API.
Some Cloud CLI commands may fail.
Upgrade your CLI to the latest build to resolve this issue.
```

## Clusters

### `otterize clusters list [-n <cluster-name>]`

List all clusters, optionally filtered by name.

Clusters in Otterize Cloud represent Kubernetes clusters that are integrated with Otterize Cloud. The list also includes clusters that were not integrated or are no longer integrated, as long as they were not deleted.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| `-n` or `--name` |  | Filter the list by cluster name. Since cluster names are unique, this will always return at most one cluster. |

#### Returns

Returns a table of information about the clusters.

```shell
id                 name        status       namespace count service count configuration.globalDefaultDeny
────────────────── ─────────── ──────────── ─────────────── ───────────── ───────────────────────────────
cluster_64fetu3i2t my-cluster1 CONNECTED    4               50            false
cluster_7g4tre319g my-cluster2 DISCONNECTED 12              127           true

```

### `otterize clusters get <cluster-id>`

Gets a single cluster by id.

#### Returns

Returns a table of information about the cluster.

```shell
id                 name        status       namespace count service count configuration.globalDefaultDeny
────────────────── ─────────── ──────────── ─────────────── ───────────── ───────────────────────────────
cluster_64fetu3i2t my-cluster1 CONNECTED    4               50            false
```

### `otterize clusters create -n <cluster-name>`

Creates a cluster in Otterize Cloud with the given name.

To connect it to a Kubernetes cluster, i.e. to the Otterize OSS operators in that cluster:
- You'll need an environment to which all namespaces in the cluster are assigned by default. If needed, create an environment with `otterize environments create -n <env-name>`.
- Create an integration with `otterize integrations create kubernetes --cluster-id <cluster-id> --env-id <env-id>`.
- Follow [the guide to installing or upgrading Otterize OSS](https://docs.otterize.com/getting-started/oss-installation) and use the integration's credentials.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| `-n` or `--name`` |  | The name to give the cluster, in Otterize Cloud. |

:::danger
Document once cluster creation is fixed.
:::
#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize clusters update [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize clusters delete [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

## Environments

### `otterize environments list [-l label1,label2] [-n name]`

List all environments, optionally filtered by labels or name.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| `-l` or `--labels` |  | Return only the environments that contain all the given labels. A label may be of the form `key` or `key:value`. |
| `-n` or `--name` |  | Filter the list by environment name. Since environment names are unique, this will always return at most one cluster. |

#### Returns

Returns a table of information about the environments.

```shell
id             name                     labels            integrations_count applied_intents_count
────────────── ──────────────────────── ───────────────── ────────────────── ─────────────────────
env_yg64fe8ty2 staging                  region-EU                            15
env_glohhjfowc phase 1                                                       1
env_o6tdthl6qz phase 2                                                       2
env_zfndrpvqgp phase 3                                                       3
env_5mzzqxrr2f eks1_default_environment key1=,key2=value2                    0
env_lqrcfkam5g phase 0                  phase1=                              0

```

### `otterize environments get [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize environments create [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize environments update [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize environments delete [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

## Integrations

### `otterize integrations list [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize integrations get [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize integrations create [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize integrations update [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize integrations delete [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

## Intents

### `otterize intents convert [-f PATH]`

Convert client intents files in plain YAML format to Kubernetes ClientIntents resource format.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| `-f` or `--filename` | `'.'` | The client intents filename, or a directory containing client intents files. |

#### Returns

Here's the result of converting a directory containing two client intents file in plain YAML format.
The result is YAML describing two Kubernetes resources separated with the YAML `---` separator.

```shell
apiVersion: k8s.otterize.com/v1alpha2
kind: ClientIntents
metadata:
  name: cartservice
  namespace: otterize-ecom-demo
spec:
  service:
    name: cartservice
  calls:
    - name: redis-cart
      type: http
---
apiVersion: k8s.otterize.com/v1alpha2
kind: ClientIntents
metadata:
  name: checkoutservice
  namespace: otterize-ecom-demo
spec:
  service:
    name: checkoutservice
  calls:
    - name: cartservice
      type: http
    - name: currencyservice
      type: http
```

### `otterize intents list [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize intents get [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

## Invites

### `otterize invites list [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize invites create [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize invites accept [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize invites delete [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

## Namespaces

### `otterize namespaces list [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize namespaces get [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize integrations update [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

## Organizations

### `otterize organizations list [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize organizations get [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize organizations create [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize organizations update [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

## Services

### `otterize services list [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize services get [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

## Users

### `otterize services list [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```

### `otterize services get [_OPTIONS_]`

ACTION DESCRIPTION.

#### Options

| Name | Default | Description |
| --- | --- | --- |
| OPTION_NAME | OPTION_DEFAULT | OPTION_DESCRIPTION |

#### Returns

RESULTS DESCRIPTION

```shell
EXAMPLE
```
