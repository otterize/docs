"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6461],{3905:(e,t,i)=>{i.d(t,{Zo:()=>u,kt:()=>w});var r=i(7294);function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var l=r.createContext({}),c=function(e){var t=r.useContext(l),i=t;return e&&(i="function"==typeof e?e(t):a(a({},t),e)),i},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var i=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(i),m=n,w=d["".concat(l,".").concat(m)]||d[m]||p[m]||o;return i?r.createElement(w,a(a({ref:t},u),{},{components:i})):r.createElement(w,a({ref:t},u))}));function w(e,t){var i=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=i.length,a=new Array(o);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:n,a[1]=s;for(var c=2;c<o;c++)a[c]=i[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,i)}m.displayName="MDXCreateElement"},700:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(7294);function n(e){let{items:t,colSize:i}=e,n="lg:tw-grid-cols-2 tw-gap-4 xs:tw-grid-cols-1 ";return"lg"===i?n="lg:tw-grid-cols-4 tw-gap-2 xs:tw-grid-cols-2":"md"===i&&(n="lg:tw-grid-cols-3 tw-gap-2 xs:tw-grid-cols-1 md:tw-grid-cols-2"),r.createElement("div",{className:`tw-grid ${n}`},t.map((e=>r.createElement("div",{key:e.title,className:"tw-relative tw-flex tw-items-center tw-space-x-3 tw-rounded-lg tw-border tw-border-solid tw-border-primary-500 tw-bg-white tw-px-6 tw-py-5 tw-shadow-sm focus-within:tw-ring-2 focus-within:tw-ring-indigo-500 focus-within:tw-ring-offset-2 hover:tw-border-primary-600 hover:tw-shadow-md"},e.icon&&r.createElement("div",{className:"tw-flex-shrink-0"},r.createElement("img",{width:"40px",className:"tw-max-h-10 tw-max-w-10",src:e.icon,alt:""})),r.createElement("div",{className:"tw-min-w-0 tw-flex-1"},r.createElement("a",{href:e.url,className:"focus:tw-outline-none hover:tw-no-underline"},r.createElement("span",{className:"tw-absolute tw-inset-0","aria-hidden":"true"}),r.createElement("div",{className:"tw-text-md tw-font-medium tw-text-gray-900 tw-break-keep"},e.title),e.description&&r.createElement("div",{className:"tw-text-sm tw-text-gray-500"},e.description)))))))}},2921:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>w,frontMatter:()=>a,istio_tutorials:()=>d,metadata:()=>l,toc:()=>u});var r=i(7462),n=(i(7294),i(3905)),o=i(700);const a={sidebar_position:1,title:"Istio | Overview",hide_title:!0},s=void 0,l={unversionedId:"features/istio/index",id:"features/istio/index",title:"Istio | Overview",description:"Otterize can build a map of your cluster based on Istio Envoy metrics, and enforce access between services using Istio Authorization Policies.",source:"@site/docs/features/istio/index.mdx",sourceDirName:"features/istio",slug:"/features/istio/",permalink:"/features/istio/",draft:!1,editUrl:"https://github.com/otterize/docs/edit/main/docs/features/istio/index.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Istio | Overview",hide_title:!0},sidebar:"docSidebar",previous:{title:"Reference",permalink:"/features/kafka/reference"},next:{title:"Istio HTTP-level access mapping",permalink:"/features/istio/tutorials/k8s-istio-watcher"}},c={},u=[{value:"Tutorials",id:"tutorials",level:3},{value:"How does Otterize work with Istio?",id:"how-does-otterize-work-with-istio",level:3}],d=[{title:"Istio AuthorizationPolicy automation",description:"Generate AuthorizationPolicy docs from existing connections",url:"istio/tutorials/k8s-istio-authorization-policies"},{title:"Istio HTTP-level access mapping",description:"Map access between services including HTTP paths and methods",url:"istio/tutorials/k8s-istio-watcher"}],p={toc:u,istio_tutorials:d},m="wrapper";function w(e){let{components:t,...i}=e;return(0,n.kt)(m,(0,r.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"istio"},"Istio"),(0,n.kt)("p",null,"Otterize can build a map of your cluster based on Istio Envoy metrics, and enforce access between services using Istio Authorization Policies."),(0,n.kt)("h3",{id:"tutorials"},"Tutorials"),(0,n.kt)("p",null,"To learn how to use the Intents Operator to enforce access using Istio authorization policies, or map your cluster, try one of these quickstart tutorials."),(0,n.kt)(o.Z,{items:d,colSize:"sm",mdxType:"DocsLinkCard"}),(0,n.kt)("h3",{id:"how-does-otterize-work-with-istio"},"How does Otterize work with Istio?"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"First, the cluster must have ",(0,n.kt)("a",{parentName:"li",href:"/overview/installation"},"Otterize installed"),"."),(0,n.kt)("li",{parentName:"ol"},"To have Otterize generate Istio authorization policies, declare and apply (",(0,n.kt)("a",{parentName:"li",href:"/overview/intent-based-access-control"},"IBAC"),") ClientIntents for your services.\nOnce you do so, Otterize will generate an Istio authorization policy allowing access from the client service, identified by its ServiceAccount, to the server, identified by its labels.\nThe HTTP Resources section in the ClientIntents is optional: if you do not specify it, all pod-to-pod access is allowed.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"\napiVersion: k8s.otterize.com/v1alpha3\nkind: ClientIntents\nmetadata:\n  name: client\n  namespace: otterize-tutorial-istio\nspec:\n  service:\n    name: client\n  calls:\n    - name: server-abc\n      type: http\n      HTTPResources:\n        - path: /client-path\n          methods: [ GET ]\n\n")),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"If you would like Otterize to be able to autogenerate ClientIntents and map your network at the HTTP path and method level, we need to enable connection telemetry data within Istio. This can be enabled with the following YAML:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: telemetry.istio.io/v1alpha1\nkind: Telemetry\nmetadata:\n  name: mesh-default\n  namespace: istio-system\nspec:\n  # Configure access logging for Istio services\n  accessLogging:\n    # Define the access logging provider, in this case, Envoy\n    - providers:\n        - name: envoy\n  metrics:\n    # Configure metrics collection for Istio services using Prometheus\n    - providers:\n        - name: prometheus\n      # Customize metric tag overrides\n      overrides:\n        - tagOverrides:\n            # Map the "request_method" metric tag to "request.method" value\n            request_method:\n              value: request.method\n            # Map the "request_path" metric tag to "request.path" value\n            request_path:\n              value: request.path\n')),(0,n.kt)("p",null,"Or, as a ready-to-paste command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"kubectl apply -f ${ABSOLUTE_URL}/code-examples/network-mapper/istio-telemetry-enablement.yaml -n istio-system\n")),(0,n.kt)("p",null,"Once installed, Otterize will query Envoy sidecars for known connections and build an in-memory map of the relationships. After the map is built you can then view those relationships."))}w.isMDXComponent=!0}}]);